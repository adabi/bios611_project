# Magnus Carlsen Games Analysis

## Overview

This is an analysis of set of games by world chess champion Magnus Carlsen pulled from the Lichess.org server. 

Except for the Elo regression, the analysis is carried out only on a subset of games (a random sample of 500 games pulled from [this][arxiv] Kaggle archive of all his Lichess games). This small subset is meant for demonstration purposes as the source data is too large to include directly on Github. If you would like to generate a report for the full data, you will need to create an account on Kaggle and download the data, then place the files `carlsen_games_moves.csv`, `carlsen_games.csv`, and `eco_codes.csv` in the `/source_data` folder. 

## Docker

This app relies on a Docker container to launch. The included Dockerfile will install all the required dependencies. To build the Docker image (and name it in a way that is compatible with the included `launch_container.sh` script), navigate to the repository and run the following code:
``` console
docker build . -t bios611project 
```
This will build a Docker image and allow you to generate the report.

## Generating the Report

Included in this repository is a bash script, `launch_container.sh` that will automatically run the Docker image. Once you have built the image as outlined previously, just navigate to the repository and run:

``` console
bash launch_container.sh
```

This will generate a random password for the container and output it.

Alternatively, if you would like to run the container yourself and choose your own password, navigate to the repository and run: 

``` console
docker run\
 -e PASSWORD=<Your Password>\
 -p 8787:8787\
 -v $(pwd):/home/rstudio/project\
 --rm -w\
 -t bios611project sudo
``` 

Once the container is running, you can launch RStudio in your browser by navigating to `localhost:8787`. Enter `rstudio` as the username and the generated or chosen password. Then in the RStudio terminal, navigate to the project directory by using:

``` console
cd project
````

From there, you can create the report using make:

``` console
make report.pdf
```

Once the make process is finished, the `report.pdf` file should now be in the repository. If you would like to clean the repository and run the make process from scratch just run:

``` console
make clean
```

Note that this cleans everything except for the file `source_data/accuracy.csv` which is generated by the `accuracy.R` script by randomly sampling 25 games and analyzing them using stockfish. The reason this file is excluded from the clean command is that it takes a long time to analyze those games (possibly longer than an hour depending on the available hardware). If you would like to clean everything *including* this then you can run:

``` console
make fullclean
```
Running `make report.pdf` after this full clean will take a long time as it reanalyzes the sample of games and outputs it to `source_data/accuracy.csv`.

Once you are done, you may quit the container process by pressing `ctrl + d`. 

* * * 

[arxiv]:https://www.kaggle.com/zq1200/magnus-carlsen-lichess-games-dataset
